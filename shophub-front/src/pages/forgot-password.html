<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Şifrəni unutdum - ShopHub</title>
</head>
<body class="bg-gray-50 flex items-center justify-center h-screen">
    <div class="bg-white p-8 rounded-2xl shadow-lg w-full max-w-md border border-gray-100">
        <h2 class="text-2xl font-bold text-center mb-4">Şifrəni sıfırla</h2>
        <p class="text-gray-500 text-center text-sm mb-8">E-mail ünvanınızı daxil edin, biz sizə təlimatları göndərəcəyik.</p>
        
        <div id="statusMsg" class="hidden p-3 rounded-lg mb-4 text-sm font-medium"></div>

        <form id="forgotForm" class="space-y-6">
            <div>
                <label class="block text-sm font-medium text-gray-700">Email ünvanı</label>
                <input type="email" id="email" required placeholder="nümunə@mail.com" 
                    class="w-full p-3 border rounded-xl mt-1 focus:ring-2 focus:ring-black outline-none transition">
            </div>
            <button type="submit" id="btnSubmit" 
                class="w-full bg-black text-white py-3 rounded-xl font-bold hover:bg-gray-800 transition shadow-lg">
                Göndər
            </button>
        </form>

        <div class="mt-8 text-center">
            <a href="login.html" class="text-sm text-gray-400 hover:text-black transition">← Giriş səhifəsinə qayıt</a>
        </div>
    </div>

    <script type="module">
        import { $ } from "../js/utils/dom.js";
        import { sendResetEmail } from "../js/services/auth.service.js";

        $("#forgotForm").onsubmit = async (e) => {
            e.preventDefault();
            const email = $("#email").value;
            const btn = $("#btnSubmit");
            const msg = $("#statusMsg");

            try {
                btn.disabled = true;
                btn.innerText = "Göndərilir...";
                
                await sendResetEmail(email);

                msg.innerText = "Sıfırlama linki emailinizə göndərildi! ✅";
                msg.className = "p-3 rounded-lg mb-4 text-sm bg-green-50 text-green-700 block";
                $("#forgotForm").reset();
            } catch (err) {
                msg.innerText = err.message;
                msg.className = "p-3 rounded-lg mb-4 text-sm bg-red-50 text-red-700 block";
            } finally {
                btn.disabled = false;
                btn.innerText = "Göndər";
            }
        };
    </script>
</body>
</html>